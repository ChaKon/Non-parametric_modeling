close all;
clear all;
%%%%%%%%%%%% Data set for parametric modeling %%%%%%%%%%%%%%%%
% a= load ('icubdyn.dat');
% % xlswrite('param_icubdyn_rand.xlsx',a);
% % a = load('JAMES_DATASET/jamesdyn.dat');
% % X_lambda = a(1:2000,1:12);
% % y_lambda = a(1:2000,13:18);
% % csvwrite('X_lambda.txt',X_lambda);
% % csvwrite('y_lambda.txt',y_lambda);
% % xlswrite('param_jamesdyn.xlsx',a);
% % radicubdyn = degtorad(a);
% % xlswrite('icubdyn_true_rad.xlsx',radicubdyn);
% % csvwrite('icubdyn_true_rad.txt',radicubdyn);
% xlswrite('icubdyninxlsx.xlsx',a);


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Batch learning for linear model 
% a = [0.035417 0.033373 0.045692 0.001443 0.002827 0.001230]; %[ 0.0145133 0.155685 0.0159254 0.0722934 0.0806254 0.0852749 ];
% b = [0.035417 0.033373 0.045692 0.001443 0.002827 0.001230];%[ 0.0145223 0.155692 0.0159299 0.0723012 0.0806335 0.0852835 ];
% c = [0.035419 0.033375 0.045693 0.001443 0.002827 0.001230];%[0.0145237 0.155693 0.0159306 0.0723023 0.0806347 0.0852847 ];
% F = ([a(1,1:3);b(1,1:3);c(1,1:3)]);
% T = ([a(1,4:6);b(1,4:6);c(1,4:6)]);
% % subplot(1,2,1);
% % bar([1 2 3],[F(:,1) F(:,2) F(:,3)]);
% % legend('f(1)','f(2)','f(3)');
% % set(gca, 'XTickLabel',{'87850 (fixlambda)','87850 (loocv)','87850 (ho)'})
% % ylim([0 0.020]);
% % xlabel('\itNumber of samples');
% % ylabel('\itrmse error (in Newton)');
% % title('rmse error for force');
% % freezeColors
% % subplot(1,2,2);
% % bar([1 2 3],[T(:,1) T(:,2) T(:,3)]);
% % barmap = [0 1 1; 1 0 1; 1 0 0];
% % colormap(barmap);  
% % legend('tau(1)','tau(2)','tau(3)');
% % set(gca, 'XTickLabel',{'87850 (fixlambda)','87850 (loocv)','87850 (ho)'})
% % ylim([0 0.020]);
% % xlabel('\itNumber of samples');
% % ylabel('\itrmse error (in Newton - meter)');
% % title('rmse error for torques');
% ta = [0.42 0.23 ]; %[1.13 1.1];
% tb = [17.12 0.38];%[4.38 1.1];
% tc = [1.15 0.20];%[1.26 1.1];
% time = ([ta;tb;tc]);

%%%%%%%%%%%%%%%%%% Batch Increase in samples error reduce for linear models
% a =[0.240015 0.230694 0.317744 0.010498 0.020229 0.008250];%[ 0.103046 1.09642 0.111128 0.514477 0.56797 0.597285 ];
% b = [0.161194 0.147507 0.200726 0.006591 0.012004 0.005431];%[ 0.0616512 0.691903 0.0734887 0.325883 0.358189 0.380697 ];
% c = [0.110240 0.104837 0.141400 0.004622 0.008731 0.003900];%[ 0.0450173 0.492081 0.0516314 0.227677 0.254532 0.268999 ];
% d = [0.090052 0.08602 0.115523 0.003573 0.007204 0.003083];%[ 0.0374959 0.401495 0.0407073 0.187207 0.207671 0.219132 ];
% e = [0.078018 0.07445 0.101373 0.003242 0.006218 0.002749];%[ 0.0322299 0.347486 0.0357764 0.161177 0.180409 0.189666 ];
% fe = [0.037704 0.035349 0.048196 0.001533 0.002984 0.001310];%[ 0.0153288 0.164155 0.0168419 0.0763216 0.0849799 0.0898572 ];
% g = [0.035417 0.033373 0.045692 0.001443 0.002827 0.001230];%[ 0.0145237 0.155693 0.0159306 0.0723023 0.0806347 0.0852847];
% D = ([a;b;c;d;e;fe;g]);
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3);e(1,1:3);fe(1,1:3);g(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6);e(1,4:6);fe(1,4:6);g(1,4:6)]);
% ta =  [0.32 0.09];%[0.10 0.07];
% tb =  [0.36 0.11];%[0.15 0.13];
% tc = [0.51 0.08];%[0.30 0.27];
% td = [0.53 0.09];%[0.32 0.31];
% te = [0.54 0.11];%[0.38 0.36];
% tf = [0.69 0.22];%[1.15 1.01];
% tg = [0.79 0.24];%[1.29 1.12];
% time = ([ta;tb;tc;td;te;tf;tg]);

%%%%%%%%%%%%%%%%%%%% Batch for Non Linear Models
% a = [0.2383198 0.230653 0.317435 0.010587 0.020127 0.008300];%[ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];
% b = [0.238319 0.230653 0.317435 0.010587 0.020127 0.008300];%[ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];
% c = [1.767406 2.056039 1.970818 0.029436 0.095806 0.019997];%[ 0.510507 0.59957 0.571491 0.00827801 0.027812 0.00556094 ];
% d = [0.038982 0.030093 0.029097 0.002606 0.003113 0.001933];%[ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% e = [0.035030 0.031462 0.028505 0.002657 0.003137 0.002004];%[ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% fe = [0.578025 0.702258 1.020473 0.097341 0.192558 0.050589];
% g = [0.062689 0.090556 0.150097 0.009649 0.020685 0.006778];
% D = ([a;b;c;d;e;fe;g]);
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3);e(1,1:3);fe(1,1:3);g(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6);e(1,4:6);fe(1,4:6);g(1,4:6)]);
% ta = [322.08 2.74];%[368.17 5.11];
% tb = [132.10 3.11];%[111.54 4.96];
% tc = [4.30 5.95];%[10 8.51];
% td = [307.55 5.55];%[394.55 10.51];
% te = [161.69 5.12];%[139.9 10.39];
% tf = [5.30 0.13];
% tg = [42.62 0.60];
% time = ([ta;tb;tc;td;te;tf;tg]);

%%%%%%%%%%%%%%%%%%%% Batch Non Linear Models experiments
% a = [0.035030 0.031462 0.028505 0.002657 0.003137 0.002004];%[ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% b = [0.948028 1.092037 1.050005 0.019008 0.05108 0.012587];%[ 0.602807 0.715022 0.682822 0.0108603 0.0338096 0.00718224 ];
% %c = [ 0.436244 0.51671 0.491117 0.00702494 0.0239957 0.0048075 ];
% f = ([a(1,1:3);b(1,1:3)]);%;c(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6)]);%;c(1,4:6)]);
% ta = [161.69 10.33];%[165.5 10.33];
% tb = [2.443703e+03 38.28];%[1983.09 67.69];
% %tc = [2953.59 258.6];
% time = ([ta;tb]);%;tc]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Recursive RLS Linear Models
% a = [4.694640 4.423734 6.056580 0.191300 0.374786 0.163074];
% b = [4.694640 4.423734 6.056580 0.191300 0.374786 0.163074];
% f = ([a(1,1:3);b(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6)]);
% ta = [59.41 0.26];
% tb = [28.72 0.31];
% time = ([ta;tb]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Recursive RLS Kernels
% a = [0.290496496753235 0.342014295110250 0.325410550398428 0.00478906858757436 0.0158387538446612 0.00328115125857841];
% b = [0.290382397414312 0.341806820459020 0.325233669424193 0.00478001146216111 0.0158206862773949 0.00327640530901791];
% c = [0.290265855997444 0.341753878790680 0.325127618358620 0.00478330952620541 0.0158207372696063 0.00327244164366900];
% d = [ 0.290507000091272 0.341952559771686 0.325349449000920 0.00478475175277960 0.0158296266452428 0.00327937086004961];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6)]);
% ta = [886.6122 0.03224];
% tb = [8.762544768473142e+02 0.042983549970152];
% tc = [1.073381601521675e+03 0.044924985332328];
% td = [9.912059610618197e+02 0.049573311849256];
% time = ([ta;tb;tc;td]);

%%%%%%%%%%%%%%%%%%%% Experiments on Batch Non Linear Models change in
%%%%%%%%%%%%%%%%%%%% crossfolds
% a = [0.238319 0.230653 0.317435 0.010587 0.020127 0.008300];%[ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];
% b = [0.238319 0.230653 0.317435 0.010587 0.020127 0.008300];%[ 0.0597071 0.0577867 0.079528 0.00265252 0.00504269 0.00207964 ];
% c = [0.038982 0.030093 0.029097 0.002606 0.003113 0.001933];%[ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% d = [0.043660 0.030140 0.030751 0.002613 0.003135 0.001916];%[ 0.0433155 0.0451638 0.0393012 0.00161512 0.00243222 0.00114074 ];
% e = [0.580744 0.680349 1.044893 0.091043 0.190602 0.049117];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3);e(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6);e(1,4:6)]);
% ta = [311.15 4.95];%[386.21 4.95];
% tb = [670.26 12.51];%[355.9 5.15];
% tc = [303.18 6.85];%[387.22 10.79];
% td = [661.71 5.09];%[362.89 10.22];
% te = [18.36 0.084];
% time = ([ta;tb;tc;td;te]);
%%%%%%%%%%%%% Expeeriments on Batch Non Linear Change in crossfolds, change in
%%%%%%%% samples & limiting guesses
% a = [0.161194 0.147509 0.200727 0.006591 0.012004 0.0054320];%[ 0.040333 0.0369083 0.0502244 0.00164925 0.0030038 0.00135914 ];
% b = [0.946817 1.090531 1.048572 0.018990 0.051012 0.012576];%[ 0.342636 0.405417 0.3864 0.00619488 0.019053 0.00406495 ];
% c = [0.945031 1.088312 1.046460 0.018963 0.050905 0.012558];%[ 0.0130301 0.0143442 0.0126103 0.00090206 0.00139159 0.000701042 ];
% d = [0.338001 0.508248 0.662832 0.067794 0.121688 0.037817];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6)]);
% ta = [752.87 14.23];%[629.36 32.63];
% tb = [336.58 66.51];%[1361.37 66.51];
% tc = [666.68 61.08];%[666.68 61.08];
% td = [10.09 0.07];
% time = ([ta;tb;tc;td]);

%%%%%%%%%%%%%%%%%%%% Linear Vs Non Linear Model
% a = [0.240015 0.230694 0.317744 0.010498 0.020229 0.008250];%[ 0.103046 1.09642 0.111128 0.514477 0.56797 0.597285 ];
% b = [0.238319 0.230653 0.317435 0.010587 0.020127 0.008300];%[ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];
% c = [0.035030 0.031462 0.028505 0.002657 0.003137 0.002004];%[0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% d = [0.578025 0.702258 1.020473 0.097341 0.192558 0.050589];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6)]);
% ta = [0.32 0.09];%[0.47 0.07];
% tb = [132.10 3.11];%[111.54 4.96];
% tc = [161.69 5.12];%[139.9 10.39];
% td = [5.30 0.13];
% time = ([ta;tb;tc;td]);


%%%%%%%%%%%%%% Experiments recursive rls for Non linear model
% a = [0.046644 0.075901 0.153907 0.007275 0.015877 0.005597];
% b = [0.064851 0.076285 0.159796 0.009793 0.016624 0.005742];
% c = [0.065788 0.084657 0.143665 0.009204 0.020675 0.006297];
% d = [0.060805 0.086307 0.156330 0.008037 0.021014 0.006290];
% e = [0.069855 0.089183 0.158015 0.009437 0.023771 0.006780];
% fe = [0.081996 0.092680 0.154202 0.010831 0.024462 0.006783];
% g = [0.081560 0.096714 0.155248 0.011219 0.025602 0.007239];
% h = [0.082598 0.094841 0.153392 0.011376 0.025590 0.007116];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3);e(1,1:3);fe(1,1:3);g(1,1:3);h(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6);e(1,4:6);fe(1,4:6);g(1,4:6);h(1,4:6)]);
% ta =  [243.21 0.031];
% tb =  [237.09 0.019];
% tc = [956.94 0.035];
% td = [917.01 0.044];
% te = [2.0620120e+03 0.079];
% tf = [2.0725776e+03 0.094];
% tg = [2.1043406e+03 0.086];
% th = [2.0574474e+03 0.057];
% time = ([ta;tb;tc;td;te;tf;tg;th]);

%%%%%%%%%%%%%%% Batch learning crossfolds set to 1
% a = [ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];%[0.2383198 0.230653 0.317435 0.010587 0.020127 0.008300];
% b = [ 1.95115 4.74202 10.7964 0.0754217 0.942823 0.301879 ];%[0.238319 0.230653 0.317435 0.010587 0.020127 0.008300];
% c = [ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];%[0.038982 0.030093 0.029097 0.002606 0.003113 0.001933];
% d = [ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];%[0.035030 0.031462 0.028505 0.002657 0.003137 0.002004];%[ 0.937666 1.11338 1.05863 0.0150756 0.051971 0.0100716 ];
% e = [0.578025 0.702258 1.020473 0.097341 0.192558 0.050589];
% f = ([a(1,1:3);b(1,1:3);c(1,1:3);d(1,1:3);e(1,1:3)]);
% tau = ([a(1,4:6);b(1,4:6);c(1,4:6);d(1,4:6);e(1,4:6)]);
% ta = [368.17 5.11];%[322.08 2.74];
% tb = [111.54 4.96];%[132.10 3.11];
% tc = [394.55 10.51];%[307.55 5.55];
% td = [139.9 10.39];%[161.69 5.12]; 
% te = [5.30 0.13];
% time = ([ta;tb;tc;td;te]);
%%%%%%%%%%%%%%%% parametric part
a = load('ICUB_DATA_inertialsensors/inertialparamsfixlambda_icub.csv');
b = load('ICUB_DATA_inertialsensors/inertialparamsloocvlambda_icub.csv');
%c = load('inertialparams_075.csv');
lambda_fix = a(end,:);
f = lambda_fix';
lambda_loocv_n_ho = b(end,:);
lo = lambda_loocv_n_ho';
%c1 = c(end,:);
plot(lambda_fix,'*g');
hold on
plot(lambda_loocv_n_ho, '^b');
hleg1 = legend('lambda_f_i_x','lambda_l_o_o_c_v_&_h_o');
hold off
title('Inertial parameters of iCub left hand');

% plot(c1, '*b');
% hold off
